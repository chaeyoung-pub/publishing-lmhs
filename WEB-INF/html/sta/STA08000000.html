<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>통계관리 - 챌린지</title>
    <script src="../../../resources/js/include.js"></script>
  </head>

  <body>
    <div class="admin-wrap">
      <header class="admin-header"></header>

      <nav class="admin-lnb"></nav>

      <div class="admin-content">
        <div class="area-path"></div>

        <h2 class="content-title">챌린지</h2>

        <div class="box-type1">
          <ul class="search-area">
            <li>
              <label for="">회사</label>
              <select class="select">
                <option value="">전체</option>
              </select>
            </li>
            <li>
              <label for="">구간</label>
              <select class="select" disabled>
                <option value="">월별 현황</option>
              </select>
            </li>
            <li>
              <label for="">년도</label>
              <select class="select">
                <option value="">2020년</option>
              </select>
            </li>
            <li>
              <label for="">구분</label>
              <select class="select" disabled>
                <option value="">스탬프 획득 현황</option>
              </select>
            </li>
          </ul>
          <button class="btn-type4 btn-bg2">검색</button>
        </div>

        <div class="chart-area">
          <div class="sort-area">
            <select class="select">
              <option value="">전체 성별</option>
              <option value="">남자</option>
              <option value="">여자</option>
            </select>
            <select class="select">
              <option value="">전체 연령대</option>
              <option value="">20대</option>
              <option value="">30대</option>
              <option value="">40대</option>
              <option value="">50대</option>
              <option value="">60대 이상</option>
            </select>
          </div>

          <!-- case1 ) 데이터가 있는 경우 -->
          <div class="canvas-wrap">
            <canvas id="canvasMultiBar"></canvas>
          </div>
          <!-- // -->

          <!-- case2 ) 데이터가 없는 경우 : 아래 테이블 노출되지않음 -->
          <div class="nodata">
            <p>조회된 데이터가 없습니다.</p>
          </div>
          <!-- // -->
        </div>

        <!-- case1-1 ) 데이터가 있는 경우 -->
        <div class="tbl-sub">
          <div class="btn-area ta-right">
            <a href="#" class="btn-type3 btn-bg4" download=""
              >엑셀 다운로드<i class="icon-excel"></i
            ></a>
          </div>
        </div>

        <div class="tbl-wrap fd-row">
          <div class="tbl-type2 tbl-fixed">
            <table>
              <caption>
                통계 구분
              </caption>
              <colgroup>
                <col style="width: 300px" />
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">구분</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1개 이상~5개 미만 획득 인원</td>
                </tr>
                <tr>
                  <td>5개 이상~10개 미만 획득 인원</td>
                </tr>
                <tr>
                  <td>10개 이상~20개 미만 획득 인원</td>
                </tr>
                <tr>
                  <td>20개 이상~30개 미만 획득 인원</td>
                </tr>
                <tr>
                  <td>30개 이상 획득 인원</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td class="tbl-bg1">스탬프 획득전체 인원</td>
                </tr>
                <tr>
                  <td class="tbl-bg2">챌린지 달성 인원</td>
                </tr>
              </tfoot>
            </table>
          </div>
          <div class="tbl-type2 tbl-scroll-x">
            <table>
              <caption>
                통계 (월별)
              </caption>
              <colgroup>
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">1월</th>
                  <th scope="col">2월</th>
                  <th scope="col">3월</th>
                  <th scope="col">4월</th>
                  <th scope="col">5월</th>
                  <th scope="col">6월</th>
                  <th scope="col">7월</th>
                  <th scope="col">8월</th>
                  <th scope="col">9월</th>
                  <th scope="col">10월</th>
                  <th scope="col">11월</th>
                  <th scope="col">12월</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                  <td class="tbl-bg1"></td>
                </tr>
                <tr>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                  <td class="tbl-bg2"></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
        <!-- // -->
      </div>

      <footer class="admin-footer"></footer>
    </div>

    <script>
      // 데이터 임시처리
      let date = [];
      for (let i = 0; i < 30; i += 1) {
        date.push(i + 1);
      }

      function getRandomArbitrary() {
        return Math.round(Math.random() * (10000 - 0) + 0);
      }

      const dataRange = function () {
        let result = [];
        for (let i = 0; i < date.length; i += 1) {
          result.push(getRandomArbitrary());
        }
        return result;
      };

      const dataPercent = function () {
        function getRandomArbitrary() {
          return Math.round(Math.random() * (100 - 0) + 0);
        }

        let result = [];
        for (let i = 0; i < date.length; i += 1) {
          result.push(getRandomArbitrary());
        }
        return result;
      };

      // 데이터 설정
      const data = {
        labels: date, //  x 축 레이블: 데이트 1 ~ 30일
        datasets: [
          {
            label: "챌린지 달성 인원",
            type: "line",
            fill: false,
            yAxisID: "y-axis-1",
            backgroundColor: chartColors.red,
            borderColor: chartColors.red,
            data: dataRange(), // y 축 레이블: 0 ~ 100
            tension: 0.4,
          },
          {
            label: "1개 이상~5개 미만 획득 인원",
            barPercentage: 0.7,
            backgroundColor: chartColors.orange,
            data: dataRange(),
          },
          {
            label: "5개 이상~10개 미만 획득 인원",
            barPercentage: 0.7,
            backgroundColor: chartColors.yellow,
            data: dataRange(),
          },
          {
            label: "10개 이상~20개 미만 획득 인원",
            barPercentage: 0.7,
            backgroundColor: chartColors.green,
            data: dataRange(),
          },
          {
            label: "20개 이상~30개 미만 획득 인원",
            barPercentage: 0.7,
            backgroundColor: chartColors.blue,
            data: dataRange(),
          },
          {
            label: "30개 이상 획득 인원",
            barPercentage: 0.7,
            backgroundColor: chartColors.purple,
            data: dataRange(),
          },
        ],
      };

      // 차트 설정
      const config = {
        type: "bar",
        data: data,
        options: {
          layout: {
            padding: 0,
          },
          legend: {
            position: "bottom",
            align: "center",
          },
          tooltips: {
            mode: "index",
            intersect: false,
            callbacks: {
              label: function (tooltipItem, data) {
                return (
                  data.datasets[tooltipItem.datasetIndex].label +
                  ":" +
                  tooltipItem.yLabel
                    .toString()
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",")
                );
              },
            },
          },
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            xAxes: [
              {
                stacked: true,
              },
            ],
            yAxes: [
              {
                stacked: true,
                ticks: {
                  callback: function (value, index, values) {
                    return value
                      .toString()
                      .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                  },
                },
              },
              {
                display: true,
                min: 0,
                max: 100,
                position: "right",
                id: "y-axis-1",
                gridLines: {
                  drawOnChartArea: false,
                },
                ticks: {
                  callback: function (value, index, values) {
                    return value
                      .toString()
                      .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                  },
                },
              },
            ],
          },
        },
      };

      // 차트 생성
      window.onload = function () {
        const ctx = document.getElementById("canvasMultiBar").getContext("2d");
        window.myBar = new Chart(ctx, config);
      };
    </script>
  </body>
</html>
